	第二章 相关技术
2.1 车联网相关技术
	IEEE已经制定了专门的协议标准WAVE（Wireless Access in Vehicular Environments）是由DSRC（Dedicated Short Range Communication）协议栈发展而来的，专门用于车联网中车-车、车-路的无线通信应用。上世纪90年代不同国家根据自己本国情况制定各自的DSRC标准。美国ASTM的DSRC标准时最早可见的，欧洲的则是由欧洲标准化委员会制定，日本由日本TC204制定，中国则是参考了欧洲而制定了自己的标准。但是这些标准均有待完善，许多问题善未解决，比如数据传输速率有待提高、路边无线设备覆盖范围有待加宽，需要进一步与互联网融合，因而应用有限，比如ETC（不停车收费）等。因此，美国IEEE在DSRC标准基础上制定了WAVE协议栈，包括IEEE802.11p及IEEE1609协议栈。其中IEEE802.11p协议是在IEEE802.11协议基础上进行一些更改，是IEEE802.11协议在车载环境下的专门补充和修改，主要定义了MAC和PHY的规范，删除了身份验证、加入网络等耗时的步骤，加快了媒体接入网络的过程。IEEE1609协议族则在11p协议基础上，定义上层相关的协议，包括数据链路层、IP网络层、数据传输层、通信安全等方面，定义了多信道协调工作来增强信道可用性，区分紧急重要数据和普通数据。WAVE协议栈的技术体系结构如下：

2-1WAVE协议栈结构.jpg

此协议参考OSI七层网络模型来定义。右边最底层是WAVE PHY层，由802.11p定义。再往上是WAVE MAC层，IEEE1609.4定义了多信道操作，IEEE802.11p定了底层MAC。LLC层仍由原来的IEEE802.2定义。网络层和传输层有两种方式，一种是IEEE1609.3定义的WAVE短信息协议WSMP，另一种是使用IPv6和TCP/UPD。其中，WSMP主要是针对安全应用，IPv6 TCP/UDP主要针对普通的应用。右边是从数据流动平面观察的。而左边是从管理平面观察的，PLME物理层管理实体，MLME MAC层管理实体，WME WSMP管理实体 。




2.2IEEE802.11p

IEEE工作组制定了很多常见的协议，比如802.3以太网，802.11a/b/g/n常见的无线网络协议。IEEE802.11协议主要是定了ISO七层协议中最下两层协议，即物理层（PHY）和数据链路层（MAC）。MAC和IP层之间的LLC仍由IEEE802协议规定，对上层透明化下层差异，从而使任何TCP/IP的程序都能在IEEE802.11协议上兼容运行。

表IEEE802各种表

IEEE802.11协议规定了两类设备：Access Point和Station。IEEE802.11p对应为RSU（RoadSideUnit）和OBU（OnBoardUnit）。AP/RSU是指工作基站，固定的无线设备，作为移动媒体的网络接入点，是无线网络和有线网络之间的桥接。STA/OBU是指无线工作站，即我们常见的无线终端设备。IEEE802.11规定了两种工作模式，一种是BSS（BasicServiceSet，基本服务集合模式），另一种是IBSS（Independent Basic Service Set），独立基本服务集合。在前一种模式中，一个无线网络需要一个AP，一般由无线路由器充当，AP负责中心控制、调度和认证等。多个BSS可构成ESS（Extended Service Set扩展服务集合）。后一种网络模式中，不存在所谓的中心接入点AP，仅由多个STA构成，比如多台笔记本电脑，这种网络即为IBSS。在IBSS中，中心控制节点由STA来充当，有相关的算法来决定哪个STA来充当，而且一般是不同STA轮流充当。有线网络中，由于有实体线路来控制接入的终端，所以可通过设备的端口来控制设备的接入。而无线网络的特殊性，任何无线设备都可以接入，没有有线网络相当的实体接口，需要在软件上来控制。在BSS和IBSS中，STA加入无线网络均得经过关联（Association）和认证(Authentication)过程。STA最开始先扫描可以使用的网络，然后针对某个无线网络进行关联，关联即为STA绑定到这个无线网络上来，忽视其他的无线网络，未关联的STA，相当于有线网络中没有插入到实体插口中。关联之后，STA就开始在针对这个无线网络收发数据。对于开放使用的网络，对用户没有限制，这时STA就可以在该无线网络中自由使用了。对于有限制的网络，还需要认证过程，限制符合身份的STA使用无线网络，常见的就是输入无线网络的密码。当然，还可以更高层次的认证过程，比如限定MAC，网页认证等，这些不属于强制内容，不在这里讨论。
    802.11p是作为IEEE802.11的修正议而出现，遵循相同的IEEE802.11协议架构，目的是为了适应车联网环境。在PHY上，802.11p采用了OFDM，与802.11a一致，这种方式抗干扰性强，更能适合快速变化的车辆环境，信道带宽缩小一半，从IEEE802.11a的20MHz变成10MHz，减小多普勒效应，同时也减少了码间串扰。IEEE802.11p协议还新增了一种“MAVE Mode”模式，在这种模式下，OBU加入无线网络时，没有信道扫描、关联和认证等加入网络的过程，直接在无线网络中发起通信，减少冗长的认证过程，适应了车载环境下车辆快速移动从而停留在无想网络覆盖范围内时间大大缩短的情况。IEEE802.11p还将信道进行划分，将5.850-5.925GHz这75MHz的带宽划分为7个channel。

WAVE频谱分配图

如图所示，IEEE802.11p定义了两种类型信道，一种是CCH(Control Channel，控制信道），另一种是SCH（Service Channel，服务信道）。CCH主要负责传输实时性要求比较高的数据，以及WSA报文，而SCH主要负责传输实时性要求不高的应用或者娱乐商务应用，如视频通话等应用。最左和最右的信道保留着专门用途。CCH上会周期性地广播WSA（WAVE Service Announcement），其作用相当于IEEE802.11网络中Beacon报文作用。OBU在进入WBSS覆盖范围中，通过收到的WSA选择加入WBSS，离开WBSS覆盖范围后，将推出此WBSS网络。


2.3IEEE1609协议栈



2.4Linux相关编程