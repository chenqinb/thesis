车载环境下的媒体接入控制
Media Access Control in Vehicular Environment

摘要
随着互联网和交通系统的不断发展，二者互相融合的车联网（The Internet of Vehicles）受到越来越多研究机构和厂商的关注和研究。车联网是当今研究前沿物联网的一个集合，是物联网应用于智能交通系统（Intelligent Transport System）领域的具体形式。
车联网是汽车高速移动的环境下，通过车辆上的无线收发装置，以及路边固定的无线收发装置，通过通信协议组合构建连接起来的一个车用互联网。车联网涉及到无线技术、通信技术、数据处理技术等各种技术，涉及面广。车联网旨在提供一个车-车、车-路高速的数据通信方式，实时准确整合车载信息，解决交通拥堵问题，确保行车安全，同时提供其他的商务娱乐应用，最终实现智能城市管理。
汽车做为车载环境下的移动媒体，需要遵循特定的接入控制规则以接入车载网。现有成熟的媒体接入控制主要是国际电子电气工程师协会IEEE802.11无线技术，采用CSMA/CA（Carrier Sense Multiple Access with Collision Avoidance）的媒体访问控制技术MAC（Media Access Control，介质访问控制）机制，CSMA/CA中当节点发送数据遇到载波链路冲突时，要退避一个随机时间。除了CSMA/CA控制机制外，还有TDMA（Time Division Multiple Access，时分多址）机制，通过分配时间片的方式调度整个系统的通信。
本论文在调查研究无线网络媒体接入控制技术和车联网相关技术的基础上，研究CSMA和TDMA这两种不同的接入控制，并在Linux操作系统编程和Linux内核网络子系统的基础上，借助Linux开放的网络协议栈接口，实现一个简单的媒体控制接入系统平台，涉及到双网卡通信方式和802.11p协议方式。

关键词： 车载网 媒体接入控制 CSMA/ TDMA Linux网络编程
 


Abstract
With the progressive development of the Internet and the transport system , research institutes and manufacturers have aroused more and more concern and study  about the merging The Internet of Vehicles. The Internet of Vehicles is a subset of today's the leading edge of scientific research , also is the concrete format used in Intelligent Transport System of The Internet of Things .
The Internet of Vehicles is a vehicle – use network at high speed vehicle environment, which is formed by the high speed moving vehicle with the wireless transceiver , and a stationary roadside with the wireless transceiver, constructed by communications protocol.
The Internet of Vehicles comes to a wildly and variety of technologies such as wireless networking technology, communications technology , data processing technology. The Internet of Vehicles is intended to provide a high speed data communication between vehicle - vehicle, vehicle - roadside, integrate the vehicle information real-timely and accurately , solve the traffic congestion problems ,  ensure road safety , also provide additional business and entertainment applications , and ultimately management the city smartly.
The automotive vehicle must follow a specific vehicle access control rule as a movable media to  access the  network . Currently the mature media access control is mainly the Institute of Electrical and Electronics Engineers (IEEE)802.11 wireless Media Access Control technologies using CSMA / CA (Carrier Sense Multiple Access with Collision Avoidance) , when a wireless node transmits data carrier links conflict happen, it should backoff a random time . In addition to the CSMA / CA control mechanism , TDMA (Time Division Multiple Access) is another choice, which communicate via the scheduler allocated time slices .
This thesis research about wireless network media access control technology and vehicle networking technology on the basis of the relevant research CSMA and TDMA different media access control. With the Linux operating system programming , the Linux kernel networking subsystem ,and the Linux open network protocol stack interface, achieve a simple media access control system platform, include dual-NIC communication and 802.11p protocol.
 
第一章绪论
1.1研究背景及意义
当前世界，经济不断发展，科技不断提高，信息技术己经融入到生活的方方面面。把信息技术融入到生活以及工业技术当中，可以提升生活质量、提高生产效率。于是物联网(Internet of Net)的概念因此产生。物联网指的是将一切和人类相关的生活科技生产教育交通等“智能化物件或动物”或“智能尘埃”，通过各种有线/无线的短距离/长距离通讯网络实现互通互联、应用融合、以及基于云计算的营运等模式，提供安全可控、个性化的报警联动、实时在线监测、远程控制、决策支持、定位追溯、调度指挥统计报表、、远程维保、预案管理、安全防范、在线升级、领导桌面等管理和服务功能，实现对“万物”的“高效、节能、安全、环保”的“管、控、营”一体化。物联网是世界发展的一种趋势，这一技术将会发展成为一个上万亿规模的新兴信息产业。面对物联网潜在的巨大经济效益，美国、欧盟、日本等发达国家和地区相继制定了各自的物联网技术与发展计划，我们物联网技术研究市场开拓也紧随国际步伐。2009年温家宝总理提出“感知中国”科技发展计划，确定物联网技术及产业为国家战略发展产业，物联网技术与产业在我国迎来了蓬勃发展的良好机遇。
交通运输是现代社会发展和国民经济的基础，现代社会城市化速度的加快、全球经济—体化进程、国民经济的高速增长的加快以及人们对交通的需求越来越高，交通系统所涉及的领域和范围越来越广，传统的交通管理方式显得力不从心。利用科技信息技术，引入实现准确、实时、全方位的交通信息采集、传输、处理、发布与控制，保障交通安全、高效的智能交通系统ITS 成为提高交通管理水平的重要途径。ITS 是由车辆控制系统、交通监控系统、运营车辆管理系统、交通信息发布系统等集成一体，面向交通运输领域服务的现代电子信息系统，其将道路、驾驶员和车辆有机地结合在一起，利用对车辆、驾驶员和道路实时信息采集、自动智能处理和控制来达到充分利用交通资源的目的。世界上对于ITS的研究目前正异常火热，其主要协议栈WAVE(Wireless Access in Vehicular Environment)已由IEEE制定，专门用于ITS中基于无线的通信应用。
我国智能交通管理的发展起步较晚，直到90年代后相关的研究部门才开始研究 ITS 发展战略和 GIS（Geographic Information System地理信息系统）、GPS（lobal Positioning System全球定位系统）、EDI（Electronic Data Interchange电子数据交换） 在交通中的应用等，重视交通信息网络的建设，如交通部的公路智能运输系统发展战略研究、铁道部 TMIS（Transportation Management Information System铁路运输管理系统）、DMIS（Dispatch Management Information System调度指挥管理系统） 等信息系统开发。经过多年的努力在国内车联网的发展上我们也已取得明显的进展。但是我国智能交通系统中目前所使用的技术仅能满足一些有限的应用，如 ETC（Electronic Toll Collection电子不停车收费系统） 等的要求。
因此我们车联网的发展面临巨大的挑战和机遇：
	我们经济发展较快，高速公路发展迅速，规摸不断扩大，纳构不断复杂，运营管理难度不断增加，使得对高效稳定的智能交通管理手段的需求不断增大。
	我国城镇化速度加快，城市面积不断增大，城市交通状况日益恶化，交通拥堵交通事敌频发，交通污染严重，使得城市必须借助智能交通监管手段来改变这样的现状和趋势。
	人们的生活水平的提高以及由于工作生活的需要，出行更加频繁.人们己不再满足汽车仅仅只是简单的代步工具，更希望它是安全的、舒适的、高效的和环保的，并带有娱乐、工作、辅助驾驶等功能，因而对定位导航、辅助驾驶、车载流媒体设备等车载电子设备提出了更高要求和迫切需求。
	我国智能交通的发展起步较晚，尚处在初级阶段，但发展较快，己经建设了很多系统并投入使用，如城市电子警察系统、城市红绿灯信号控制系统和城市交通状态检侧系统、城市交通信息实时发布系统、电子交通警察系统、电子不停车收费系统、高速公路紧急救援系统、高速公路智能运管系统、车载定位导航系统、车辆辅助驾驶系统等等。而以上系统相互独立，不能信息共享，需进行系统集成优化，傲到信息资源共享。
	我国交通状态复杂，行人、非机动车、机动车视行现象严重，导致交通违章行为和交通事故额繁发生，因此需要对行人和车辆给予足够的安全信息支持以保障其安全。
以上的挑战和机遇中，最先要解决的是车载环境下媒体的接入及控制。目前基于传统的无线网络媒体接入控制中，暂时没有专门针对车载环境下汽车高速移动的情况。基于以上原因，本文以车载环境下媒体接入控制作为研究对象，符合我们当前经济与社会发展的方向，并具有较好的现实意义。



1.2国内外研究现状
VANET作为智能交通系统的重要组成部分,是各国智能交通发展研究中的关键部分,对提高交通运输系统的安全性和通行效率具有十分重要的作用,因此吸引各国的研究机构和生产厂商的密切关注。以美国、欧洲和円本为例,推出相关项目研究车路协同系统。在美国、欧洲和日本的ITS发展经历了三个主要阶段,1930-1980年为研究的准备阶段,1980-1995年为可行性研究的阶段,从1995年后以产品开发为主。各国都开展DSRC标准的制定工作,美国将5.9GHz频段作为专用于车辆通信环境,在欧洲也制定车路协同的标准和规范。
在上世纪80年代末,美国有很多研究团队为早期的IVHSCIntelligent VehicleHighway Systems)的研究奠定了基础,随后在1994年,美国交通部将IVHS更名为ITS America。在美国多个地方研究智能交通,其中一个关键的项目是AHS(Automated Hi^way System), AHS项目由国家自动公路系统会社推行。在近几年美国又开展VII、IntelliDrive计划和CVHAS[2]。研究包括车辆与车辆间的安全性研究、车辆与路侧基础设施间的安全性、实时的数据捕获、动态地移动应用、道路天气和环境研究、车路协同等。VII(Vehicle Infrastructure Integration)是为改善道路的安全而研究和开发的一系列连接车辆与车辆上的设备的应用,VII的设想是在美国的车辆上装备GPS模块和通讯设备,与全国的道路网进行数据交换。随着VII从研究阶段转换为商业测试和市场,为扩大新的无线和计算技术的研究,将VII项目更名为IntelliDrive计划。IntelliDrive计划是ITS战略研究计划的核心,在车辆、基础设施和行人的无线设备间创建可互操作的连接,以保证安全、移动性和环境保护。CVHAS(Cooperative Vehicle-Highway Automation Systems)通过研究实际交通问题以提高交通系统性能,将CVHAS应用在卡车和公共汽车中。这些项I的研究重点均为车车通信、车与路侧单元通信以及协同控制。
日本的ITS最早从上世纪80年代末开始,进行ARTS(Advanced RoadTransportation Systems)、VICS (Vehicle Information and Communication System)和AVS(Advanced Safety Vehicle)项目研究。1996年开始的VICS系统为核心研究系统,到目前已经基本完成智能交通系统的基础和核心技术的开发阶段,进入实用技术的研发,其中VICS项目主要促进研究和发展车辆安全技术,已形成了庞大的产业和成熟的产品。学术研究和工业组织的代表项目为VERTIS(Vehicle,Road and Traffic Intelligent Society)。2005-2010 期间主要研究车路间协调、智能汽车系统等;在2010年后,日本将重点研究车路协同系统的实际应用,构建人车路三者一体化的信息网络和安全控制技术。
在1930至1980年期间,是欧洲智能交通发展的第一个阶段,这个阶段的技术发展并不成熟。在1980至1995这个阶段中,欧洲的19个国家的政府、公司和教育机构建立了欧洲高效安全交通系统计划(PROMETHEUS),在1987至1994年间发展了 DRIVE计划。在PROMETHEUS计划下开展了 ARGO,设计、开发和研究交通信息化领域的创新的解决方案,实现交通的协调和管理。在1991年成立ERTICO以促进智能交通的不断发展,包括eSafety Forum和EasyWay来加强ITS的实施和应用。在2010年制定新的框架Directive 2010/40/EU,框架的制定加速创新的交通技术在欧洲的部署,解决ITS在欧洲的兼容性和互操作性。欧洲将车路协同通信作为重点的研究方向,项目包括CarTalk2000、C0M2REACT、CVIS 等[2]。
随着信息技术、电子技术、传感通信技术和计算机等技术的快速发展,我国从上世纪80年代开始加快对智能交通系统的技术研究,近几年物联网的发展对我国车联网的发展起推动作用。车联网是新一代的智能交通系统,在物联网时代,用物联网技术来支持的智能交通。我国在智能交通体系架构下,是以道路基础设施的智能化建设作为核心,以车辆与公路交通之间的相互协调作为基础[3],实现人、车和路三者相互协调的智能公路系统。在2000年至2010年期间,国内在车辆运行状态的监控与预警、交通信息的采集、汽车安全辅助驾驶、车载导航设备等方面做了大量的研究,2006年至2010年期间,城市交通和城际的智能交通的发展都得到大力支持。在技术研究方面,交通部成立了“国家ITS工程研究中心”,科技部将智能交通系统作为国家科技攻关项目 始研究。目前,已有一些教育和研究机构在进行相关车路协同技术的研究,例如“智能公路技术跟踪”等项目,重点研究车路协同关键技术。20]0-2015年,在我国将形成完善的智能交通技术体系。在2015-2020年,我国智能交通的发展将步入成熟的阶段,形成人车路协调的智能交通系统。但目前在我国还未对车路系统进行整体研究,还未符合车联网理念的商业系统的推广标准。因此,在智能交通方面还有很多的研究工作来推动我国交通智能化的发展。
在WAVE/1609系列标准的平台实现方面,国内外已有一些产品基于FPGA实现,用于测试真实环境下的道路情况和车路协同的测试。这种方法采用Xilinx系列的FPGA套件,通过VHDL或者Verilog编程实现OFDM调制,接收器、发送器和信道模拟器的设计。在欧洲举办的Grand Cooperation Driving Challenge竞赛活动[4]主要研究车路协同和交通控制。目前的IEEE 802.11P产品不多,主要以FPGA作为无线通信模块和802.11a网卡近似用于车联网通信中。802.11p
标准的产品有CVIS的eBox、DENSO的无线安全模块WSU等,目前在中国用于车路协同测试的产品较少,因此,研究车联网平台的搭建具有实际应用价值。

现有的国内外IEEE802.11无线网络普遍都使用CSMA/CA方法，载波监听使用物理载波监听和虚拟载波监听。只要其中一个监听功能显示媒介处于忙碌状态，MAC就会将此状况汇报给较高层的协议。当帧传送完成且经过一段DIFS（DCF Interframe Space分布式协调帧间隔），其他工作站就会试图传送之前拥堵的数据。DIFS之后的时间为竞争窗口或退避窗口，工作站会在竞争窗口随机挑选一个时隙来访问无线媒介。当多个工作站试图同时进行传送数据时，挑到第一个时隙的工作站可以优先传送。当某个工作站传送失败时，该工作站退避时间会越来越长，竞争串口一般为2的指数倍减1。由于各个工作站各自随机退避，因此当节点数目越来越多时，媒介冲突的概率越来越大，以致于性能出现了急剧下降。退避时间的不确定性，也导致信息的传输时间不确定性。
因此提出另一种机制TDMA，预先协调各个工作站的发送时隙，一个好的时隙分配方案可以完全避免冲突，也能自适应节点的增加和减少情况，还能控制信息的传送时间。根据国内外的一些仿真结果表示，用于车联网的技术中，单纯的802.11a+ CSMA/CA，性能最差，802.11p+CSMA/CA性能居中，而802.11p+TMDA效果最好。目前国内外暂无车联网中的TDMA平台，大部分停留在仿真阶段。研究一种自配置的TDMA方法，并在开发板上实现，应用于车联网的路由，是本论文的研究内容。

1.3论文的研究内容
第二章相关技术
